

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuring RDMA for Windows &mdash; Arena 0.1.84.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Arena 0.1.84.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home">
          

          <!---->
          </a>

          
            
            
              <div class="version">
                0.1.84
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact_us.html">Contact Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_sdk_datasheet.html">Arena SDK Datasheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="arena_sdk_windows.html">Arena SDK for Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="arena_sdk_linux.html">Arena SDK for Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">Code Reference &amp; Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="arena_api.html">Arena Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="jupyter_guide.html">Using LUCID’s ArenaView with Jupyter Notebooks</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Arena</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Configuring RDMA for Windows</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="configuring-rdma-for-windows">
<h1>Configuring RDMA for Windows<a class="headerlink" href="#configuring-rdma-for-windows" title="Permalink to this heading">¶</a></h1>
<p>The Remote Direct Memory Access (RDMA) is a feature available on compatible LUCID cameras that enables
camera data to be transferred to the host’s RAM directly via the network card bypassing the host’s CPU.
This results in lower latency and higher speeds.</p>
<p>To use the RDMA feature with LUCID cameras, you need to use a compatible netword card supplied by LUCID.</p>
<p>The sections below describe the prerequisites for RDMA, some example environments, and a configuration procedure.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h2>
<p>Windows configuration of RDMA requires the following host computer and camera:</p>
<p>Host computer:</p>
<ul>
<li><p>Windows 10 Pro (64-bit) or Windows 11 Pro (64-bit)</p></li>
<li><p>A compatible network card. Examples:</p>
<blockquote>
<div><ul class="simple">
<li><p>PCIE-10GPOE2-LUCID (LUCID dual port 1G/10G PoE+ RDMA-enabled network card)</p></li>
<li><p>PCIE-10GETH2-BC (Broadcom Dual Port 10G Ethernet Card)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>PCIe Generation 3 x8</p></li>
<li><p>ArenaSDK (with RDMA support) installed</p></li>
</ul>
<p>Camera:</p>
<ul class="simple">
<li><p>A compatible LUCID camera with up-to-date firmware</p></li>
</ul>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td rowspan="3"><p><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 70px;" /></a></p></td>
<td rowspan="3"><p>The PCIE-10GPOE2-LUCID network card from LUCID is a 1G/10G network card.
A Triton2 (2.5G) or an Atlas/Atlas IP67 (5G) connected to this card would each connect as 1G device.</p></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="example-systems">
<h2>Example systems<a class="headerlink" href="#example-systems" title="Permalink to this heading">¶</a></h2>
<p>The following are systems tested by LUCID that were successfully configured to use RDMA with a compatible LUCID camera.</p>
<p><strong>System 1: Streaming 1x Atlas10 camera</strong></p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Motherboard</p></td>
<td><p>ASUS PRIME Z370-A</p></td>
</tr>
<tr class="row-even"><td><p>Processor</p></td>
<td><p>Intel(R) Core(TM) i7-8700 CPU &#64; 3.60GHz</p></td>
</tr>
<tr class="row-odd"><td><p>Memory</p></td>
<td><p>Crucial Technology BLS8G4D26BFSB.16FBD2 16GB (2x8GB) DDR4 SDRAM</p></td>
</tr>
<tr class="row-even"><td><p>Memory Channels</p></td>
<td><p>2 available, 2 active</p></td>
</tr>
<tr class="row-odd"><td><p>Operating System</p></td>
<td><p>Windows 10 Professional (x64) version 22H2, build 19045.2486</p></td>
</tr>
<tr class="row-even"><td><p>Video</p></td>
<td><p>Intel HD Graphics 630</p></td>
</tr>
<tr class="row-odd"><td><p>Storage</p></td>
<td><p>Samsung SSD 850 EVO 500GB</p></td>
</tr>
<tr class="row-even"><td><p>Network Card</p></td>
<td><p>LUCID RDMA Network Card PCIE-10GPOE2-LUCID</p></td>
</tr>
</tbody>
</table>
<p><strong>System 2: Streaming 4x Atlas10 cameras</strong></p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Motherboard</p></td>
<td><p>ASUS PRIME X299-A II</p></td>
</tr>
<tr class="row-even"><td><p>Processor</p></td>
<td><p>Intel(R) Core(TM) i9-10900X CPU &#64; 3.70GHz</p></td>
</tr>
<tr class="row-odd"><td><p>Memory</p></td>
<td><p>Kingston 9905743-213.A00G 128GB (8x16GB) 16 GB PC4-25600 DDR4 SDRAM</p></td>
</tr>
<tr class="row-even"><td><p>Memory Channels</p></td>
<td><p>4 available, 4 active</p></td>
</tr>
<tr class="row-odd"><td><p>Operating System</p></td>
<td><p>Windows 10 Professional (x64) version 22H2, build 19045.2604</p></td>
</tr>
<tr class="row-even"><td><p>Video</p></td>
<td><p>NVIDIA GeForce GT 730, 2GB</p></td>
</tr>
<tr class="row-odd"><td><p>Storage</p></td>
<td><p>KINGSTON SKC3000S512G 512GB</p></td>
</tr>
<tr class="row-even"><td><p>Network Card</p></td>
<td><p>2x LUCID RDMA Network Cards PCIE-10GPOE2-LUCID</p></td>
</tr>
</tbody>
</table>
<p><strong>Driver Firmware for network card</strong></p>
<p>For each of the systems above, the LUCID RDMA Network Card PCIE-10GPOE2-LUCID had the following driver and firmware:</p>
<ul class="simple">
<li><p>Driver version: 224.0.159.0, Date: 11/4/2022</p></li>
<li><p>Network card firmware version: 224.1.102.0</p></li>
</ul>
<p>The Arena SDK installation automatically installs the driver.
Related firmware updates may be available for download from the LUCID website.
Update the firmware following the instructions that accompany the firmware files.</p>
<a class="reference internal image-reference" href="_images/rdma_nic_driver_properties.jpg"><img alt="_images/rdma_nic_driver_properties.jpg" src="_images/rdma_nic_driver_properties.jpg" style="width: 350px;" /></a>
</section>
<section id="initial-preparation">
<h2>Initial preparation<a class="headerlink" href="#initial-preparation" title="Permalink to this heading">¶</a></h2>
<p>To configure the host computer:</p>
<ol class="arabic">
<li><p>Manage power-saving features on host motherboard.</p>
<p>Disable the following power-saving properties on the motherboard if they are present and enabled.</p>
<blockquote>
<div><ul class="simple">
<li><p>Intel SpeedStep</p></li>
<li><p>C1 State (Halt)</p></li>
<li><p>C1E State (Enhanced Halt)</p></li>
<li><p>The system should be using C0 (Operating State)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Turn off sound notifications.</p>
<p>Open <strong>Settings &gt; Notifications and Actions</strong>, and ensure that <strong>Allow notifications to play sounds</strong> is cleared.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td rowspan="2"><p><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 70px;" /></a></p></td>
<td rowspan="2"><p>Sounds for notifications need to be off so Windows does not prioritize them over the delivery of network packets.</p></td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</li>
<li><p>Connect power to the card via the SATA connector.</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/rdma_power_attachment.jpg"><img alt="_images/rdma_power_attachment.jpg" src="_images/rdma_power_attachment.jpg" style="width: 500px;" /></a>
</div></blockquote>
</li>
<li><p>Ensure that your RAM placement activates the maximum number of memory channels.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="_images/rdma_hwinfo_memory_channels.jpg"><img alt="_images/rdma_hwinfo_memory_channels.jpg" src="_images/rdma_hwinfo_memory_channels.jpg" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text">System information captured with HWInfo.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Consult the documentation for your motherboard to determine the optimal memory sequence.</p>
</li>
<li><p>Confirm that your card has established the minimum PCIe bandwidth required for 10G transmission.</p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="_images/rdma_pcie_bandwidth.jpg"><img alt="_images/rdma_pcie_bandwidth.jpg" src="_images/rdma_pcie_bandwidth.jpg" style="width: 550px;" /></a>
<figcaption>
<p><span class="caption-text">System information captured with HWInfo.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The table below shows the minimum link width required for the number of cameras connected.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p># of 10G cameras</p></th>
<th class="head"><p>Link width and speed required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>PCIe Version: 3.0, Link Width 2x, Link Speed 4.0 GT/s</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>PCIe Version: 3.0, Link Width 4x, Link Speed 4.0 GT/s</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="installation-procedure">
<h2>Installation procedure<a class="headerlink" href="#installation-procedure" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Complete the initial setup of the network card.</p>
<blockquote>
<div><ol class="loweralpha">
<li><p>Open the Run dialog using Windows + R, and run ncpa.cpl to find your network connections associated with your NIC.
For each associated Ethernet connection, clear all Networking options except the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>LUCID Vision Labs Lightweight Filter Driver</p></li>
<li><p>Internet Protocol Version 4 (TCP/IPv4)</p></li>
<li><p>Internet Protocol Version 6 (TCP/IPv6)</p></li>
</ul>
</div></blockquote>
<a class="reference internal image-reference" href="_images/rdma_nic_properties.jpg"><img alt="_images/rdma_nic_properties.jpg" src="_images/rdma_nic_properties.jpg" style="width: 350px;" /></a>
</li>
<li><p>Assign an IP Address and Subnet to your NIC.</p>
<a class="reference internal image-reference" href="_images/rdma_ip_address.jpg"><img alt="_images/rdma_ip_address.jpg" src="_images/rdma_ip_address.jpg" style="width: 350px;" /></a>
</li>
<li><p>In the PCIE-10GPOE2-LUCID or the PCIE-10GETH2-BC network cards, ensure that the following settings are configured as shown.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Energy-Efficient Ethernet</p></td>
<td><p>Disabled</p></td>
</tr>
<tr class="row-even"><td><p>Jumbo Packet</p></td>
<td><p>9174 (set maximum value)</p></td>
</tr>
<tr class="row-odd"><td><p>NetworkDirect functionality</p></td>
<td><p>Enabled</p></td>
</tr>
<tr class="row-even"><td><p>NetworkDirect Technology</p></td>
<td><p>RoCE v2</p></td>
</tr>
<tr class="row-odd"><td><p>RoCE MTU</p></td>
<td><p>4096</p></td>
</tr>
<tr class="row-even"><td><p>Allow the computer to turn
off this device to save power</p></td>
<td><p>Cleared</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div></blockquote>
</li>
</ol>
</section>
<section id="activating-rdma">
<h2>Activating RDMA<a class="headerlink" href="#activating-rdma" title="Permalink to this heading">¶</a></h2>
<p>To use RDMA mode on a compatible LUCID camera, open ArenaView and set Transmission Stream Protocol to RDMA.</p>
<a class="reference internal image-reference" href="_images/rdma_arenaview.jpg"><img alt="_images/rdma_arenaview.jpg" src="_images/rdma_arenaview.jpg" style="width: 550px;" /></a>
<p>In C++, this is equivalent to the following:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Arena</span><span class="o">::</span><span class="n">IDevice</span><span class="o">*</span><span class="w"> </span><span class="n">pDevice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pSystem</span><span class="o">-&gt;</span><span class="n">CreateDevice</span><span class="p">(</span><span class="n">deviceInfos</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"> </span>
<span class="n">Arena</span><span class="o">::</span><span class="n">SetNodeValue</span><span class="o">&lt;</span><span class="n">GenICam</span><span class="o">::</span><span class="n">gcstring</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">GetNodeMap</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;TransportStreamProtocol&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RDMA&quot;</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">TAB1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;GevSCPD = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span>
<span class="n">Arena</span><span class="o">::</span><span class="n">SetNodeValue</span><span class="o">&lt;</span><span class="kt">int64_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">GetNodeMap</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;GevSCPD&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span>
<span class="w"> 	 	 </span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">TAB1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;DeviceLinkThroughputReserve = &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span>
<span class="n">Arena</span><span class="o">::</span><span class="n">SetNodeValue</span><span class="o">&lt;</span><span class="kt">int64_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">GetNodeMap</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;DeviceLinkThroughputReserve&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w">  </span>
<span class="n">Arena</span><span class="o">::</span><span class="n">SetNodeValue</span><span class="o">&lt;</span><span class="kt">int64_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pDevice</span><span class="o">-&gt;</span><span class="n">GetNodeMap</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;GevSCPSPacketSize&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">16000</span><span class="p">);</span><span class="w">  </span>
</pre></div>
</div>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 70px;" /></a></p></td>
<td><p>10G link speed is required to use RDMA.
If the camera is streaming images, you must call StopStream before setting TransportStreamProtocol.
and enter the following command (administrator prompt required):</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Lucid Vision Labs, Inc.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.84.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/sphinx_highlight.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>